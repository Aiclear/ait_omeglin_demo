:root {
  --spacing: 12px;
  --small-spacing: 8px;
  --border-radius-large: 8px;
  --border-radius-small: 4px;
}

* {
  box-sizing: border-box;
}

body { /* wraps header and main */
  display: grid;
  grid-template-rows: auto 1fr;
  grid-row-gap: var(--spacing);
  height: 100vh;
  padding: var(--spacing);
  margin: 0;
  font-family: 'Roboto', sans-serif;
}

header {
  padding: var(--small-spacing);
  border-radius: var(--border-radius-large);
  background: #f2f2f2;
}

header .header-container {
  width: 100%;
  height: 100%;
  background-color: white;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--small-spacing);
  border-radius: var(--border-radius-large);
}

header .user-info {
  display: flex;
  align-items: center;

  & > * {
    margin: 0 var(--small-spacing);
  }
}

header img {
  display: block;
  margin: 4px 0;
  max-height: 40px;
}

main { /* wraps video-panel and chat-panel */
  display: grid;
  grid-template-columns: 4fr 7fr; /* video panel is 4/11 of the width, chat panel is 7/11 */
  grid-column-gap: var(--spacing);
  overflow: auto;
}

.video-panel {
  display: grid;
  grid-template-rows: 1fr 1fr;
  grid-row-gap: var(--spacing);
  overflow: auto;

  & section {
    overflow: auto;
    display: flex;
    justify-content: center;
    align-items: center;
    background: #f2f2f2;
    border-radius: var(--border-radius-large);

    & video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    &.local video {
      transform: scaleX(-1);
    }
  }
}

.chat-panel {
  display: grid;
  grid-template-rows: 1fr auto;
  grid-row-gap: var(--spacing);
  padding: var(--spacing);
  background: #f2f2f2;
  border-radius: var(--border-radius-large);

  .chat-log {
    padding: var(--spacing);
    background: #fff;
    overflow-y: scroll;
    border-radius: var(--border-radius-small);
    line-height: 1.4;

    .message.local::before {
      font-weight: bold;
      color: blue;
      content: "You: ";
    }

    .message.remote::before {
      font-weight: bold;
      color: red;
      content: "Stranger: ";
    }

    .message.server {
      color: #999;
      font-style: italic;
    }
  }

  .chat-controls {
    display: flex;

    .messaging {
      display: flex;
      flex-grow: 1;

      & input {
        margin: 0 16px;
        width: 100%;
        height: 40px;
        padding: 16px;
        border: 0;
        border-radius: var(--border-radius-small);
        font-size: 16px;

        &:focus {
          outline: none;
        }
      }
    }

    .pairing button {
      width: 120px;
    }
  }
}

button {
  background: #1e88e5;
  color: #fff;
  border: 0;
  border-radius: var(--border-radius-small);
  height: 40px;
  line-height: 1;
  padding: 0 16px;
  cursor: pointer;

  &:hover {
    background: #1976d2;
  }
}

/* Conditional styles for buttons */
.chat-controls .pairing button {
  display: none;
}

[data-state=NOT_CONNECTED] button#startPairing,
[data-state=DISCONNECTED_LOCAL] button#startPairing,
[data-state=DISCONNECTED_REMOTE] button#startPairing,
[data-state=CONNECTING] button#abortPairing,
[data-state=CONNECTED] button#leavePairing {
  display: block;
}

/* Conditional styles for spinner */
.spinner {
  display: none;
}

[data-state=CONNECTING] .spinner {
  display: block;
}

/* Conditional styles for remote video */
body:not([data-state=CONNECTED]) .remote video {
  display: none;
}

/* Conditional styles for chat */
body:not([data-state=CONNECTED]) .chat-controls .messaging {
  filter: grayscale(1);
  opacity: 0.6;
  pointer-events: none;
}

/* Mobile layout */
@media (max-width: 768px) {
  main { /* put video panel on top of chat panel */
    grid-template-columns: none;
    grid-template-rows: 1fr 2fr;
    grid-row-gap: var(--spacing);
  }

  .video-panel { /* put video side by side */
    grid-template-rows: none;
    grid-template-columns: 1fr 1fr;
    grid-column-gap: var(--spacing);
  }
}

/* 好友请求按钮样式 */
.friend-request-btn,
.friend-accept-btn {
    background-color: #4CAF50;
    border: none;
    color: white;
    padding: 8px 16px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 14px;
    margin: 4px 2px;
    cursor: pointer;
    border-radius: 4px;
    transition: background-color 0.3s;
}

.friend-request-btn:hover,
.friend-accept-btn:hover {
    background-color: #45a049;
}

.friend-request-btn:disabled,
.friend-accept-btn:disabled {
    background-color: #cccccc;
    cursor: not-allowed;
}

.friend-accept-btn {
    background-color: #2196F3;
}

.friend-accept-btn:hover {
    background-color: #0b7dda;
}

/* 好友列表样式 */
.friends-list {
    background-color: #f5f5f5;
    border-radius: 6px;
    padding: 10px 15px;
    margin: 10px 0;
}

.friends-list h4 {
    margin-top: 0;
    color: #333;
    font-size: 16px;
}

.friends-list ul {
    list-style-type: none;
    padding-left: 0;
    margin-bottom: 0;
}

.friends-list li {
    padding: 5px 0;
    border-bottom: 1px solid #eee;
}

.friends-list li:last-child {
    border-bottom: none;
}
